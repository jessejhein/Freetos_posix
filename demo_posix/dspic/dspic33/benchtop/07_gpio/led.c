/************************************************************************************************
 * File:            led.c
 * Description:     control LED for benchtop board v0.05.05 (non-POSIX compliant)
 ***********************************************************************************************/

#include <define.h>
#include <asm/system.h>

/************************************************************************************************
 * Turn LED On
 ************************************************************************************************/
void led_on(unsigned int led){
    switch(led){
        case 0: LATC |= 0x8000; break;
        case 1: LATG |= 0x0001; break; //Buzzer
    }
}

/************************************************************************************************
 * Turn LED Off
 ************************************************************************************************/
void led_off(unsigned int led){
    switch(led){
        case 0: LATC &= 0x7FFF; break;
        case 1: LATG &= 0xFFFE; break; //Buzzer
    }
}

/************************************************************************************************
 * Current status of LED
 ************************************************************************************************/
int led_status(unsigned int led){
    switch(led){
        case 0: return _RC15;
        case 1: return _RG0;                
        default:return -1;
    }   
}

/************************************************************************************************
 * Toggle LED
 ************************************************************************************************/
void led_toggle(unsigned int led){
    if(led_status(led) == 0)
        led_on(led);
    else
        led_off(led);
}

/************************************************************************************************
 * Initialize LED-pins for Digital Outputs
 ************************************************************************************************/
void led_init( void ){
    //Set RC15 (LED4) as output
    TRISC &= 0x7FFF;
    //Set RG0  (Buzzer) as output
    TRISG &= 0xFFFE;
    
    LATC &= 0x7FFF;
    LATG &= 0xFFFE;    
}
